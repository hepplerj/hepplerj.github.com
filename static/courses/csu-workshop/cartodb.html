<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>CartoDB</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<!-- begin in_header.html -->
<meta name="description" content="Workshop materials for the Bimson workshop at CSU">
<meta name="author" content="Jason Heppler">
<link rel="shortcut icon" href="img/favicon.png">

<link href='https://fonts.googleapis.com/css?family=Lato:400,300' rel='stylesheet' type='text/css'>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<script>

</script>
<!-- end in_header.html -->




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="libs/custom.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.1/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<div class="fluid-row">
  <div class="col-sm-12">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand" href="./">Carl Bimson Workshop</a>
        </div>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="http://jasonheppler.org">Jason Heppler</a></li>
        </ul>
      </div>
    </nav>
  </div>
</div>

<div class="fluid-row">
  <div class="col-sm-3">
    <div class="list-group">
      <a class="list-group-item" href="./">Home</a>
      <a class="list-group-item" href="introduction.html">Introduction</a>
      <a class="list-group-item" href="resources.html">Resources</a>
      <h5>Digital Mapmaking</h5>
      <a class="list-group-item" href="map-literacy.html">Spatial Literacy</a>
      <a class="list-group-item" href="cartodb.html">CartoDB</a>
      <a class="list-group-item" href="storymap.html">StoryMap.js</a>
      <h5>Network Analysis</h5>
      <a class="list-group-item" href="network-literacy.html">Network Literacy</a>
      <a class="list-group-item" href="palladio.html">Palladio</a>
      <a class="list-group-item" href="gephi.html">Gephi</a>
    </div>
    <script>
      // manage active state of toc based on current page
    var href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href === "" || href === "index.html")
      href = "./";
    $('a.list-group-item[href="' + href + '"]').addClass('active');
    </script>
  </div>
  <div class="col-sm-9 content-body">

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">CartoDB</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#examining-the-data">Examining the data</a></li>
<li><a href="#uploading-data-to-cartodb">Uploading data to CartoDB</a></li>
<li><a href="#next-steps">Next steps</a></li>
</ul>
</div>

<p>CartoDB (recently rebranded to <a href="https://carto.com/blog/welcome-to-carto-builder/">CARTO</a>) is a web-based mapping platform that offers GIS and web mapping tools to build maps for display and interaction in browsers. CartoDB excels at building <a href="map-literacy.html">thematic maps</a>. Signing up through CartoDB is free for small accounts, and your instition may have a subscription to CartoDB if you require more than the freemium level.</p>
<div id="examining-the-data" class="section level2">
<h2>Examining the data</h2>
<p>For working with CartoDB, let’s use the <a href="https://github.com/cestastanford/historical-us-city-populations">historic U.S. cities population data</a> compiled by Erik Steiner at the Spatial History Project in the Center for Spatial and Textual Analysis. You can download a modified and tidy version of the data as a CSV <a href="data/us-historic-populations-tidy.csv">from here</a>. Be sure to read the <a href="https://github.com/cestastanford/historical-us-city-populations">repository</a> where this data comes from, which explains how the data was collected by Erik and what the data is attempting to describe.</p>
<p>Open the file in Libre Office or Excel. What kind of spatial data is included here?</p>
</div>
<div id="uploading-data-to-cartodb" class="section level2">
<h2>Uploading data to CartoDB</h2>
<p>We are going to start by connecting our dataset to CartoDB. Click on “New Map” in the upper right corner, select “Connect Dataset,” make sure that “Data file” is selected and browse for the <code>us-historical-populations-tidy.csv</code> file on your desktop. Note we can also connect data in other ways. If you wanted, you could connect the data to a Google Spreadsheet. So, if you’re planning to make continuous edits to the data and want that reflected nearly instantaneously with the map, that might be a good option for you. Or, if much of your data already lives in Google Spreadsheets, you might as well use that instead of exporting the data.</p>
<div class="figure">
<img src="img/carto-data-import.png" alt="Connecting data in CartoDB." />
<p class="caption">Connecting data in CartoDB.</p>
</div>
<p>Once you’ve imported the data, you’ll be presented with a map right away without any special styling.</p>
<div class="figure">
<img src="img/carto-imported-map.png" alt="The default map." />
<p class="caption">The default map.</p>
</div>
<p>We want to do some interesting things with this data, since viewing this map alone isn’t that informative. We could, for example, create a bubble map of the population data. Selecting the map layer wizard on the righthand side and scroll to the “Bubble” map. Try changing some of the aesthetic features of the map (bubble sizing, color, stroke width, and so on).</p>
<div class="figure">
<img src="img/carto-bubble-map.png" alt="Bubble map of populations." />
<p class="caption">Bubble map of populations.</p>
</div>
<p>But our data includes much more than just population figures. We have three important variables to map: the <em>population</em> of a <em>city</em> in a given <em>year</em>. CartoDB has a feature that makes it relatively easy to make a map that allows you to visualize change over time using what they call “Torque.” Select Torque from the map layer wizard and let’s see what we get.</p>
<div class="figure">
<img src="img/carto-torque-map.png" alt="Torque map of populations." />
<p class="caption">Torque map of populations.</p>
</div>
<p>We can adapt our torque map to be more interesting by applying some CartoCSS to the map, changing the size of the bubbles based on the population count in each city. The code below will allow us to do that.</p>
<pre><code>Map {
-torque-frame-count:128;
-torque-animation-duration:10;
-torque-time-attribute:&quot;year_clean&quot;;
-torque-aggregation-function:&quot;count(population)&quot;;
-torque-resolution:1;
-torque-data-aggregation:cumulative;
}

#us_population{
  comp-op: source-over;
  marker-fill-opacity: 1;
  marker-line-color: #FFF;
  marker-line-width: 1;
  marker-line-opacity: 1;
  marker-type: ellipse;
  marker-width: 2;
  marker-fill: #F84F40;
}

#us_population[value&gt;2]{
  marker-width: 3;
}
#us_population[value&gt;4]{
  marker-width: 4;
}
#us_population[value&gt;6]{
  marker-width: 5;
}
#us_population[value&gt;8]{
  marker-width: 7;
}
#us_population[value&gt;10]{
  marker-width: 8;
}
#us_population[value&gt;12]{
  marker-width:10;
}
#us_population[value&gt;14]{
  marker-width: 12;
}</code></pre>
<p>The problem? It’s not a very interesting map.</p>
<div class="figure">
<img src="https://imgs.xkcd.com/comics/heatmap.png" alt="Pet peeves." />
<p class="caption">Pet peeves.</p>
</div>
</div>
<div id="next-steps" class="section level2">
<h2>Next steps</h2>
<p>Spend some time trying to map your own dataset, or check out some of the datasets available through CartoDB. Create a different map using one of these datasets. What sorts of aesthetics are appropriate for these data?</p>
<p>You can also join additional data in CartoDB. Read about joining two datasets together <a href="http://docs.cartodb.com/tutorials/merging_data.html">following CartoDB’s tutorial for joining data</a>.</p>
</div>

<footer>
  <p>
    
    <small>
Made with <span style="color: red; font-size: 8pt;"><i class="fa fa-heart" aria-hidden="true"></i></span> and <span style="color: brown; font-size: 8pt;"><i class="fa fa-coffee" aria-hidden="true"></i></span> in California.
      
      <br/>
      These workshops materials are &copy; 2016 <a href="http://jasonheppler.org">Jason Heppler</a>. Licensed <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.
      <br>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a>
    </small>
  </p>
</footer>

  </div>
</div>

<script>
  $.each($("img"), function(i, v) {
    var img = $(v);
    img.wrap("<a href='" + img.attr("src") + "'>");
  })
</script>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
