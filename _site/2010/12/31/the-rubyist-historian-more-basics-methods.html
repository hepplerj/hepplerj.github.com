<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta content="The online writing of Jason Heppler" name="description"/>
<title>The Rubyist Historian: Methods and Classes</title> <meta name="author" content="Jason Heppler" />
<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
<link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="/css/tweet.css" type="text/css" />
<link href="/webfonts/ss-social.css" rel="stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://jasonheppler.org/js/styleTweets.js"></script>

<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

<script src="http://d3js.org/d3.v3.min.js"></script>

<style>

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

svg {
  font: 13px sans-serif;
}

</style>

   <script type="text/javascript">

     var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-12786552-1']);
     _gaq.push(['_trackPageview']);

     (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();

   </script>

</head>
<body>

<div class="header">
	<div class="header_container">

		<section class="name"><a href="/">Jason Heppler</a></section>
		<ul class="menu">
			<li><a href="/about.html">Colophon</a></li>
			<li><a href="/research.html">Research</a></li>
			<li><a href="/teaching.html">Teaching</a></li>
			<li><a href="/hacks.html">Digital &amp; Public History</a></li>
			<li><a href="http://jasonheppler.org/jah-vita.pdf">Vita</a></li>
		</ul>
	</div>
</div>

<section class="container content">

<aside><p class="when">December 31, 2010</p></aside>
<h1>The Rubyist Historian: Methods and Classes</h1>

<p>In our last section I introduced some Ruby programming basics. Now we&#8217;re moving in to methods and classes. <!--more--></p>

<h4>Methods</h4>

<p>Notations like <code>gets()</code> and <code>chomp()</code> are called <strong>methods</strong>.  In our above example, <code>gets()</code> accepts a single line of data from the user and assigns the string to <code>name</code>. So how can we know what methods are available to us as programmers?  The all-knowing, all-powerful <a href="http://www.ruby-doc.org/">Ruby Docs</a>.  <code>gets</code> and <code>chomp</code> barely scratch the surface.  We can do things like count the number of characters or lines in a string or file, reverse the lines of a string or file, cut a string apart and join it in alphabetical order, or operate all methods on it at once.  For example:</p>

<div class="highlight"><pre><code class="ruby"><span class="nb">puts</span> <span class="s2">&quot;I am a Rubyist Historian&quot;</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="c1">#=&gt; 24</span>
<span class="nb">puts</span> <span class="s2">&quot;Learning some Ruby-fu&quot;</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span> <span class="c1">#=&gt; uf-ybuR emos gninraeL</span>
<span class="nb">puts</span> <span class="s2">&quot;Ruby is fracking awesomesauce.&quot;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span><span class="o">.</span><span class="n">join</span><span class="p">()</span> <span class="c1">#=&gt;    .Raaabcceeefgiikmnorsssuuwy</span>
</code></pre></div>

<p>Run this in the terminal and you should get the commented results.  For the first example, we would technically say that we are <em>invoking the length method on object &#8220;I am a Rubyist Historian.&#8221;</em> (Or, even more abstractly, &#8220;I am a Rubyist Historian&#8221; is an <em>object of type string</em>.) Everything before the period is the <strong>receiver</strong> while everything after the period indicates the <strong>method(s)</strong> you wish to invoke upon the object.</p>

<p>We can also create methods.  We&#8217;ll return to our original &#8220;hello, name&#8221; program.  But this time we&#8217;re going to write our own method and invoke it.  Methods are defined with the keyword <code>def</code> followed by the method name and the method&#8217;s parameters between parentheses (parentheses here are optional, but I use them for readability&#8217;s sake.  Remember, if you do not use parentheses you need to have a single space in its place, e.g., <code>name hello</code> is the same as <code>name(hello)</code>).  So to build a new &#8220;hello, name&#8221; program using a defined method, we could write:</p>

<div class="highlight"><pre><code class="ruby"><span class="c1"># defining function &#39;hello&#39; to ask</span>
<span class="c1"># for parameter &#39;name&#39;</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
    <span class="s1">&#39;Hello &#39;</span> <span class="o">+</span> <span class="nb">name</span>
<span class="k">end</span>

<span class="nb">puts</span> <span class="s2">&quot;Please enter your name: &quot;</span>
<span class="nb">name</span> <span class="o">=</span> <span class="nb">gets</span><span class="o">.</span><span class="n">chomp</span>

<span class="nb">puts</span> <span class="n">hello</span><span class="p">(</span><span class="nb">name</span><span class="p">)</span>
</code></pre></div>

<p>NB: Indentations does not matter to Ruby, but for readability&#8217;s sake, we include them.</p>

<p>Become very familiar with defining functions. This allows us to define functions for later use and set code apart to keep the program organized (as Prof. Steve Ramsay persistently reminded us in his course, programs are designed for <em>people</em> to read, not just computers).  You also want to avoid redundancy.  As a final note, what happens inside of functions is not visible outside the function.  We can make things visible by using the global variable (adding $ to the beginning of the variable you want visible, e.g., <code>$result</code>) but, as Prof. Ramsay warned us: <strong>global variables are evil</strong>.  No, really, <strong>they are</strong>.  The last thing you&#8217;ll want is a global variable to plague parts of your code without your knowledge.</p>

<h4>Classes</h4>

<p>Similarly to methods, we can define classes in Ruby. Recall that Ruby is an object oriented programming language. By using classes, we&#8217;re fully entering the realm of OOP and learning how to create our own objects. We know that objects are closely allied with a type (object of type string, for example) and that certain behaviors go with certain objects. Objects are a data structure and a state, and also have behaviors that we call methods. </p>

<p>Ruby classes are templates for creating new kinds of objects.  Classes are created by using the <code>class</code> keyword, and take note that classes are capitalized and methods are lowercase.  By using OOP we are making data central through what&#8217;s called <strong>procedural programming</strong> where we&#8217;re defining relationships between and among objects.  </p>

<p>Let&#8217;s say you wanted a program that allowed you to input author names and ISBNs.  First we define the class starting off the definition with <code>class</code> followed by the class name, capitalized:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Books</span>
    <span class="c1"># . . .</span>
<span class="k">end</span>
</code></pre></div>

<p>We&#8217;ll use the <code>initialize</code> method here, which allows programmers to set the state of constructed objects.  We store these as <strong>instance variables</strong> inside the object, which we incidate through the use of the <code>@</code> symbol. This makes variables visible within a class &#8211; this is <strong>not</strong> a global variable.  But the instance variables means we can allow each object to have its own unique state.  <code>initialize</code> is a special method in Ruby.  Ruby allocates memory to hold <code>uninitialized</code> objects and then calls the object&#8217;s <code>initialize</code> method.  The method passes any parameters that were passed to <code>new</code>.  </p>

<p>Enough talk, let&#8217;s write the code and explain things further:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Books</span>

    <span class="kp">attr_accessor</span> <span class="ss">:fname</span><span class="p">,</span> <span class="ss">:lname</span><span class="p">,</span> <span class="ss">:isbn</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span> <span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">,</span> <span class="n">isbn</span> <span class="p">)</span>
        <span class="vi">@fname</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="vi">@lname</span> <span class="o">=</span> <span class="n">lname</span>
        <span class="vi">@isbn</span> <span class="o">=</span> <span class="n">isbn</span>
    <span class="k">end</span>

    <span class="k">def</span> <span class="nf">to_s</span>
        <span class="vi">@lname</span> <span class="o">+</span> <span class="s2">&quot;, &quot;</span> <span class="o">+</span> <span class="vi">@fname</span> <span class="o">+</span> <span class="s2">&quot;, ISBN: &quot;</span> <span class="o">+</span> <span class="vi">@isbn</span>
    <span class="k">end</span>

<span class="k">end</span>

<span class="n">author</span> <span class="o">=</span> <span class="no">Books</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Walt&quot;</span><span class="p">,</span> <span class="s2">&quot;Whitman&quot;</span><span class="p">,</span> <span class="s2">&quot;1234567890&quot;</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">author</span>
</code></pre></div>

<p>What we&#8217;ve done here is passed the instance variables <code>@fname</code>, <code>@lname</code>, and <code>@isbn</code> a string by calling the class constructor <code>Books</code> (<code>Books.new("Walt", "Whitman", "1234567890")</code>). We could just as easily said <code>Books.new("William", "Shakespeare", "1234567890")</code>. Note that <code>attr_accessor</code> is not declaring an instance variable, it&#8217;s only creating the accessor methods.  Ruby decouples instance variables and accessor methods.</p>

<p>The class <code>Books</code> takes three variables, <code>fname</code>, <code>lname</code>, and <code>isbn</code>. These parameters act like local variables within the method and follow the same lowercase naming convention. Yet, if we kept them as local variables they would vanish once <code>initialize</code> returned.  So, we use an accessor to keep the variables usable throughout the class.</p>

<p>Note also that we redefined the <code>to string (.to_s)</code> type cast as well. By default, when Ruby uses <code>puts</code> it calls on the <code>.to_s</code> type cast to convert data into a string. But we want <code>.to_s</code> to be more useful. We can override the default implementation to display whatever we&#8217;d like it to display.</p>

<h4>Additional Resources</h4>
<ul>
<li><a href="http://juixe.com/techknow/index.php/2007/01/22/ruby-class-tutorial/">Ruby Class Tutorial</a>, Juixe Techknow</li>
</ul>

<p><em>Visit the Rubyist Historian <a href="http://www.jasonheppler.org/the-rubyist-historian-the-series.html">Table of Contents</a> for more sections, and check out the <a href="https://github.com/hepplerj/rubyist-historian">Github repository</a> for an archive of all the code examples.</em></p>

<p><em>See something that&#8217;s wrong?  Examples that don&#8217;t work?  Explanations that are unclear or confusing?  Embarrassing typographic errors?  Drop me an email at jason.heppler+feedback at gmail and I&#8217;ll fix things right up!</em></p>

<p><em>Topic structure, examples, and explanations for the Rubyist Historian are inspired by, credited to, and drawn from Stephen Ramsay and his course Electronic Text.</em></p>


<section class="post_meta">
  <div class="block">
    <a href="http://twitter.com/jaheppler">
      <span class="ss-twitter ss-social-circle">
        <div>Follow me on Twitter.</div>
      </span>
    </a>
  </div>
  
  <div class="block">
  	<a href="http://acomp.stanford.edu/faculty/atsp">
  		<span class="ss-like ss-social-circle">
  			<div>I am the Academic Technology Specialist in the History Department at Stanford University.</div>
  		</span>
  	</a>
  </div>

  <div class="block">
  	<a href="http://github.com/hepplerj">
  		<span class="ss-github ss-social-circle">
  			<div>Follow me on Github.</div>
  		</span>
  	</a>
  </div>
</section>


</section>

<footer>
	Tech, history, code, coffee • Written by <a href="http://jasonheppler.org/about.html">Jason Heppler</a> • Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> <br/> Licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a> • <a href="http://www.jasonheppler.org/feed.xml">Subscribe to RSS</a>

<br>

Remember <a href="http://lessig.tumblr.com/post/40347463044/prosecutor-as-bully">Aaron Swartz</a>

</footer>

</body>
</html>
