<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta content="The online writing of Jason Heppler" name="description"/>
<title>A Few New Scripts</title> <meta name="author" content="Jason Heppler" />
<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
<link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="/css/tweet.css" type="text/css" />
<link href="/webfonts/ss-social.css" rel="stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="http://jasonheppler.org/js/styleTweets.js"></script>

<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

<script src="http://d3js.org/d3.v3.min.js"></script>

<style>

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

svg {
  font: 13px sans-serif;
}

</style>

   <script type="text/javascript">

     var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-12786552-1']);
     _gaq.push(['_trackPageview']);

     (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();

   </script>

</head>
<body>

<div class="header">
	<div class="header_container">

		<section class="name"><a href="/">Jason Heppler</a></section>
		<ul class="menu">
			<li><a href="/about.html">Colophon</a></li>
			<li><a href="/research.html">Research</a></li>
			<li><a href="/teaching.html">Teaching</a></li>
			<li><a href="/hacks.html">Digital &amp; Public History</a></li>
			<li><a href="http://jasonheppler.org/jah-vita.pdf">Vita</a></li>
		</ul>
	</div>
</div>

<section class="container content">

<aside><p class="when">June  7, 2012</p></aside>
<h1>A Few New Scripts</h1>

<p>Here&#8217;s a few nerdy bits I&#8217;ve been working on lately in my free time &#8211; just a few scripts that I&#8217;ve been using to take care of things on my Mac automatically.</p>

<p>The first is a one-line bash script that will automatically delete items from my Downloads folder that are more than a week old:</p>

<div class="highlight"><pre><code class="bash"><span class="c">#!/bin/bash</span>

find /Users/hepplerj/Downloads/* -mtime +7 -exec rm -rf <span class="o">{}</span> <span class="se">\;</span>
</code></pre></div>

<p>The only additional change I want to make to the script is to log what was deleted to a text file, but I&#8217;ll work on that on another evening. I automate the script using <code>launchd</code> (the OS X version of <code>cron</code>). You can copy the code to a file called <code>com.yourusername.cleandownloads.plist</code> and save it under <code>~/Library/LaunchAgents/</code>. You&#8217;ll either need to log out and log back in, or run <code>launchctl load ~/Library/LaunchAgents/com.yourusername.cleandownloads.plist</code> to get it started. The code as set up here will run at 11:50pm every Saturday night:</p>

<div class="highlight"><pre><code class="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;string&gt;</span>com.hepplerj.cleandownloads<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;array&gt;</span>
        <span class="nt">&lt;string&gt;</span>/bin/bash<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>/Users/hepplerj/scripts/cleandownloads.sh<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/array&gt;</span>
    <span class="nt">&lt;key&gt;</span>StartCalendarInterval<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>Weekday<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;integer&gt;</span>7<span class="nt">&lt;/integer&gt;</span>
        <span class="nt">&lt;key&gt;</span>Hour<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;integer&gt;</span>23<span class="nt">&lt;/integer&gt;</span>
        <span class="nt">&lt;key&gt;</span>Minute<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;integer&gt;</span>50<span class="nt">&lt;/integer&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre></div>

<p>Perhaps not as elegant as <code>cron</code>, but it gets the job done.</p>

<p>I don&#8217;t know if anyone will find this useful, but it&#8217;s a nice method for me. I never remember (nor enjoy) having to comb through my Downloads. This will move everything to the Trash every week for me without having to think about it. It also puts something in the back of my mind that forces me to address a download immediately (e.g., if it&#8217;s a PDF of an article I intend to keep it needs to get filed) rather than have it sit in the folder indefinitely. The next step I want to figure out is to have the Trash empty automatically.</p>

<p>The other script I&#8217;m loving lately is drawn from the incomparable <a href="http://brettterpstra.com/">Brett Terpstra</a>. Borrowing from Brett, I&#8217;ve added a command to <a href="https://github.com/hepplerj/dotfiles/blob/master/.bash_profile">my <code>.bash_profile</code></a> that allows me to log git commits to a text file. The script looks like this:</p>

<div class="highlight"><pre><code class="bash"><span class="c"># wrapper for git to log commits to an nvALT note</span>
<span class="c"># just an overall reminder of what I did all night</span>
<span class="k">function </span>ca<span class="o">(){</span>
  <span class="nv">note</span><span class="o">=</span><span class="s2">&quot;/Users/hepplerj/Dropbox/notes/universalgitlog.txt&quot;</span>
  <span class="nv">msg</span><span class="o">=</span><span class="nv">$*</span>
  <span class="nv">path</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>
  <span class="nv">before</span><span class="o">=</span><span class="k">$(</span>cat <span class="s2">&quot;$note&quot;</span><span class="k">)</span>
  <span class="nb">echo</span> <span class="s2">&quot;$(date &#39;+%y-%m-%d %H:%M | &#39;) (${path##*/}) $msg&quot;</span> &gt; <span class="s2">&quot;$note&quot;</span>
  <span class="nb">echo</span> <span class="s2">&quot;$before&quot;</span> &gt;&gt; <span class="s2">&quot;$note&quot;</span>
  git commit -am <span class="s2">&quot;$msg&quot;</span>
<span class="o">}</span>
</code></pre></div>

<p>I send the log to my notes folder in Dropbox, which is the same directory that is indexed by nvALT. So, whenever I&#8217;m doing a new commit to git, I can just write <code>ca 'Here is my commit message'</code>, hit return, git will do its business and copy the commit message to the text file. A simple task, but a nice record of things I&#8217;ve completed for different projects.</p>


<section class="post_meta">
  <div class="block">
    <a href="http://twitter.com/jaheppler">
      <span class="ss-twitter ss-social-circle">
        <div>Follow me on Twitter.</div>
      </span>
    </a>
  </div>
  
  <div class="block">
  	<a href="http://acomp.stanford.edu/faculty/atsp">
  		<span class="ss-like ss-social-circle">
  			<div>I am the Academic Technology Specialist in the History Department at Stanford University.</div>
  		</span>
  	</a>
  </div>

  <div class="block">
  	<a href="http://github.com/hepplerj">
  		<span class="ss-github ss-social-circle">
  			<div>Follow me on Github.</div>
  		</span>
  	</a>
  </div>
</section>


</section>

<footer>
	Tech, history, code, coffee • Written by <a href="http://jasonheppler.org/about.html">Jason Heppler</a> • Powered by <a href="http://github.com/mojombo/jekyll">Jekyll</a> <br/> Licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a> • <a href="http://www.jasonheppler.org/feed.xml">Subscribe to RSS</a>

<br>

Remember <a href="http://lessig.tumblr.com/post/40347463044/prosecutor-as-bully">Aaron Swartz</a>

</footer>

</body>
</html>
